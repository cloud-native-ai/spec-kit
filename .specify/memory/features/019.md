# Feature Detail: Agents Command

**Feature ID**: 019  
**Name**: Agents Command  
**Description**: Create or refine custom AI agents (.agent.md) for workspace-specific workflows.  
**Status**: Implemented  
**Created**: 2026-02-27  
**Last Updated**: 2026-02-28

## Overview

The Agents Command enables users to create and manage custom AI agents as reusable configuration files (.agent.md) in the `.github/agents/` directory. These agents can be invoked directly as commands or used as subagents in complex workflows, providing extensibility beyond the built-in Speckit commands. This feature supports both explicit agent creation with user-provided specifications and context-aware agent generation when no arguments are provided.

## Latest Review

Implementation planning completed for `/speckit.agents` with clarified behavior contracts, data model, and quickstart validation.
Task decomposition completed in `.specify/specs/003-speckit-agents-command/tasks.md`, organized by US1/US2/US3 with MVP-first sequencing.

## Key Changes

1. Implement agent file creation in `.github/agents/` directory with proper naming conventions (kebab-case)
2. Support both explicit agent specifications and context-inferred agent generation with confidence-based handling
3. Include comprehensive validation for YAML frontmatter correctness, provider whitelist compliance, and tool-workflow consistency
4. Provide example prompts for agent invocation and usage guidance
5. Enable agent updates and refinements with same-name overwrite semantics
6. Added plan artifacts for spec `003-speckit-agents-command` (`plan.md`, `data-model.md`, `contracts/agents-command.openapi.yaml`, `quickstart.md`)
7. Locked clarified defaults: same-name overwrite, low-confidence intent halt, auto-create `.github/agents/`, contradiction blocking, least-privilege tools
8. Added executable task breakdown for Setup/Foundational/US1/US2/US3/Polish phases with explicit dependencies and parallel markers
9. Implemented three-tier validation system: YAML syntax, approved providers only (GitHub Copilot/Qwen Code/opencode), and tools-workflow alignment
10. Added comprehensive quickstart validation steps covering all user stories and edge cases

## Implementation Notes

- Agent files must use kebab-case naming based on display names or roles
- YAML frontmatter must include description, tool permissions, and invocation metadata
- Agents should follow single responsibility principle with narrowly focused roles
- System should handle cases where `.github/agents/` directory doesn't exist
- Quality validation should prevent saving agents with contradictory constraints

## Future Evolution Suggestions

- Add support for agent versioning and dependency management
- Implement agent testing framework for validation
- Add agent discovery and recommendation features
- Support agent composition and orchestration patterns

## Related Files

- Feature Index: .specify/memory/features.md
- Feature Detail: .specify/memory/features/019.md

## Status Tracking

- **Draft**: Initial specification created and validated
- **Planned**: Feature detailed in index and ready for implementation planning
- **Implemented**: Core functionality working with basic agent creation and validation
- **Ready for Review**: Full implementation complete with comprehensive testing
- **Completed**: Feature fully integrated, documented, and stable in production

## Related Specifications/Requirements

- Specification: .specify/specs/003-speckit-agents-command/requirements.md
  Quality Checklist: .specify/specs/003-speckit-agents-command/checklists/requirements.md
- Plan: .specify/specs/003-speckit-agents-command/plan.md
- Data Model: .specify/specs/003-speckit-agents-command/data-model.md
- Contracts: .specify/specs/003-speckit-agents-command/contracts/agents-command.openapi.yaml
- Quickstart: .specify/specs/003-speckit-agents-command/quickstart.md